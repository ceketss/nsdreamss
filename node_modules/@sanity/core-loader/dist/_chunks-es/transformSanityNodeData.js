import{getPublishedId as e,studioPath as t}from"@sanity/client/csm";function n(e,t){return Array.isArray(e)?[void 0,e]:[e,t]}var r,i,s,o;function u(e){return{lang:null==r?void 0:r.lang,message:null==e?void 0:e.message,abortEarly:null==r?void 0:r.abortEarly,abortPipeEarly:null==r?void 0:r.abortPipeEarly,skipPipe:null==r?void 0:r.skipPipe}}function l(e,t,n,r,u){var l,a,p,c,f;const d=null!=(f=null!=(c=null!=(p=null!=(a=null!=(l=t.message)?l:function(e,t){var n;return null==(n=null==o?void 0:o.get(e))?void 0:n.get(t)}(n,u.lang))?a:e?(y=u.lang,null==s?void 0:s.get(y)):null)?p:null==r?void 0:r.message)?c:function(e){return null==i?void 0:i.get(e)}(u.lang))?f:u.message;var y;return"function"==typeof d?d(u):d}function a(e,t,n){return{typed:e,output:t,issues:n}}function p(e){let t=typeof e;return"object"===t&&(t=e?Object.getPrototypeOf(e).constructor.name:"null"),"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:t}function c(e,t,n){var r;const i=null!=(r=n.received)?r:p(n.input),s={reason:e.type,context:n.context.type,expected:n.context.expects,received:i,message:`Invalid ${n.label}: ${n.context.expects?`Expected ${n.context.expects} but r`:"R"}eceived ${i}`,input:n.input,requirement:n.context.requirement,path:n.path,lang:null==t?void 0:t.lang,abortEarly:null==t?void 0:t.abortEarly,abortPipeEarly:null==t?void 0:t.abortPipeEarly,skipPipe:null==t?void 0:t.skipPipe};return s.message=l(!1,n.context,n.reference,t,s),s}function f(e,t,n,r){if(e.pipe&&(null==n||!n.skipPipe))for(const i of e.pipe){const s=i._parse(t);if(s.issues){for(const t of s.issues){const i=c(e,n,t);r?r.push(i):r=[i]}if(null!=n&&n.abortEarly||null!=n&&n.abortPipeEarly)break}else t=s.output}return a(!0,t,r)}function d(e,t,n,r,i){var s,o;const u=p(n),a=null!=(s=null==i?void 0:i.expected)?s:e.expects,c={reason:null!=(o=null==i?void 0:i.reason)?o:"type",context:e.type,expected:a,received:u,message:`Invalid type: Expected ${a} but received ${u}`,input:n,path:null==i?void 0:i.path,issues:null==i?void 0:i.issues,lang:null==r?void 0:r.lang,abortEarly:null==r?void 0:r.abortEarly,abortPipeEarly:null==r?void 0:r.abortPipeEarly,skipPipe:null==r?void 0:r.skipPipe};return c.message=l(!0,e,t,r,c),{typed:!1,output:n,issues:[c]}}function y(e,t){return{type:"optional",expects:`${e.expects} | undefined`,async:!1,wrapped:e,default:t,_parse(e,t){if(void 0===e){const t="function"==typeof(n=this).default?n.default():n.default;if(void 0===t)return a(!0,e);e=t}var n;return this.wrapped._parse(e,t)}}}function v(e,t){const[r,i]=n(e,t);return{type:"string",expects:"string",async:!1,message:r,pipe:i,_parse(e,t){return"string"==typeof e?f(this,e,t):d(this,v,e,t)}}}function b(e){return null!==e&&Array.isArray(e)}function g(e){let t="";for(const n of e)"string"!=typeof n?"number"!=typeof n?b(n)?(t&&(t+=":"),t+=`${n.join(",")}}`):n._key&&(t&&(t+=":"),t+=`${n._key}`):(t&&(t+=":"),t+=`${n}`):(t&&(t+="."),t+=n);return t}const h=v([function e(t,n){return{type:"min_length",expects:`>=${t}`,async:!1,message:n,requirement:t,_parse(t){return t.length>=this.requirement?{output:t}:function(e,t,n,r,i){return{issues:[{context:e,reference:t,input:n,label:r,received:i}]}}(this,e,t,"length",`${t.length}`)}}}(1)]),m=y(h),x=function e(t,r,i,s){const[o,u,l]=function(e,t,r){if(!e||"object"==typeof e&&!Array.isArray(e)){const[i,s]=n(t,r);return[e,i,s]}const[i,s]=n(e,t);return[void 0,i,s]}(r,i,s);let p;return{type:"object",expects:"Object",async:!1,entries:t,rest:o,message:u,pipe:l,_parse(t,n){if(t&&"object"==typeof t){p=null!=p?p:Object.entries(this.entries);let e,r=!0;const i={};for(const[s,o]of p){const u=t[s],l=o._parse(u,n);if(l.issues){const i={type:"object",origin:"value",input:t,key:s,value:u};for(const t of l.issues)t.path?t.path.unshift(i):t.path=[i],null==e||e.push(t);if(e||(e=l.issues),null!=n&&n.abortEarly){r=!1;break}}l.typed||(r=!1),(void 0!==l.output||s in t)&&(i[s]=l.output)}if(this.rest&&(null==n||!n.abortEarly||!e))for(const s in t)if(!(s in this.entries)){const o=t[s],u=this.rest._parse(o,n);if(u.issues){const i={type:"object",origin:"value",input:t,key:s,value:o};for(const t of u.issues)t.path?t.path.unshift(i):t.path=[i],null==e||e.push(t);if(e||(e=u.issues),null!=n&&n.abortEarly){r=!1;break}}u.typed||(r=!1),i[s]=u.output}return r?f(this,i,n,e):a(!1,i,e)}return d(this,e,t,n)}}}({baseUrl:h,dataset:m,id:h,path:h,projectId:m,tool:m,type:m,workspace:m,isDraft:y(v())});function E(e){return t=e,!x._parse(t,{abortEarly:!0,skipPipe:null==(r=u(n))?void 0:r.skipPipe}).issues;var t,n,r}function k(n){const{id:r,path:i,baseUrl:s,tool:o,workspace:u,type:l}=n;return E(n)?[["id",e(r)],["type",l],["path",g(t.fromString(i))],["base",encodeURIComponent(s)],["workspace",u],["tool",o],["isDraft",r.startsWith("drafts.")]].filter((([,e])=>!!e)).map((e=>{const[t,n]=e;return!0===n?t:e.join("=")})).join(";"):void 0}export{k as x};//# sourceMappingURL=transformSanityNodeData.js.map
